!function(t){function e(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=20)}({20:function(t,e,a){t.exports=a(21)},21:function(t,e,a){"use strict";var n,r;"function"==typeof Symbol&&Symbol.iterator;(function(){!function(o,i){n=i,void 0!==(r="function"==typeof n?n.call(e,a,e,t):n)&&(t.exports=r)}(0,function(){window.Generator={},Generator.generatorResult=function(t){"massive"==t.type?($("[data-massive-sent]").html(t.sent),$("[data-massive-fails]").html(t.log.length),$(".massive-fails").empty(),$.each(t.log,function(t,e){var a="";$.each(e.errors,function(t,e){a+="- "+e.join("<br>")+"<br />"}),$(".massive-fails").append("<li>Fila #"+e.row+" - "+(e.name||"???")+'<br /><small class="text-danger">'+a+"</small></li>")}),$(".card-form").hide(),$(".card-result").attr("mode",$("#type_unique").val()),$(".card-result-massive").fadeIn()):($("#payment-url").text(t.url),$("[payment-url]").attr("href",t.url),$("[data-open-preview]").attr("data-id",t.id),$(".card-form").hide(),$(".card-result").attr("mode",$("#type_unique").val()),$(".card-result").fadeIn())},Generator.reloadEmailTemplate=function(){if(document.querySelector("#email-template")){var t=document.querySelector("#email-template").innerHTML;t=t.replace(/({\w+})/g,function(t){var e=t.replace(/{/,"").replace(/}/,"");return"{url}"==t?t:"{amount}"==t?'<b contenteditable="false" append="'+Generator.getCurrencySymbol($('[name="currency"]').val())+'" bind="'+e+'" placeholder="'+e+'"></b>':'<b contenteditable="false" bind="'+e+'" placeholder="'+e+'"></b>'}),document.querySelector("#email-template").innerHTML=t}},Generator.getCurrencySymbol=function(t){var e=$('meta[name="app_local_currency"]').attr("content"),a=$('meta[name="app_local_currency_symbol"]').attr("content");return t==e?a:"USD"==t?"$":void 0},Generator.addItem=function(t){t&&t.preventDefault(),$(".editable-row tbody").append($("#row-template").html()),$(".unbind [data-listener]").keyup(Generator.resolveItems),$(".unbind [data-delete-row]").click(function(t){t.preventDefault(),$(".editable-row .item").size()>1?$(this).closest(".item").remove():Pixel.error(Lang.get("admin.actions.delete_one"))}),$(".item").removeClass("unbind")},Generator.resolveItems=function(t){var e={items:[],subtotal:0,tax:0,total:0};$(".editable-row").find(".item").each(function(t,a){var n=$(this).closest("tr"),r=n.find("[data-code]").val(),o=n.find("[data-title]").val(),i=n.find("[data-price]").val().replace(/,/g,""),l=n.find("[data-qty]").val().replace(/,/g,""),d=n.find("[data-tax]").val().replace(/%/g,"").replace(/,/g,""),c=n.find("[data-total]"),s=0;s=Math.round(i*l*100)/100,e.subtotal+=Math.round(100*s)/100,e.tax+="%"==$("[tax-type]").attr("tax-type")?Math.round(s*(d/100)*100)/100:Math.round(100*d)/100,c.text(Generator.formatNumber(s)),o.length>3&&s>0&&e.items.push({code:r,title:o,price:i,qty:l,tax:d,total:s})}),e.total=Math.round(100*(e.subtotal+e.tax))/100,$("[data-main-subtotal]").text(Generator.formatNumber(e.subtotal)),$("[data-main-tax]").text(Generator.formatNumber(e.tax)),$("[data-main-total]").text(Generator.formatNumber(e.total)),$("[data-items-count]").text(e.items.length);var a=JSON.stringify(e.items);a=encodeURI(a),$('[name="content"]').val(a),$('[name="tax_amount"]').val(e.tax),$('[name="amount"]').val(Generator.formatNumber(e.total));var n=$('[bind="amount"]'),r=$('[name="amount"]').val();n.attr("append")&&(r=n.attr("append")+" "+r),n.length&&n.html(r)},Generator.formatNumber=function(t){return t.toFixed(2).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}})}).call(this),String.prototype.trunc=String.prototype.trunc||function(t){return this.length>t?this.substr(0,t-1)+"&hellip;":this},$(function(){var t=new Clipboard("[copy-url]"),e=new tingle.modal({footer:!1,stickyFooter:!1,closeMethods:["overlay","button","escape"],closeLabel:"CLOSE",cssClass:["pixel__modal-details"],onOpen:function(){$("[data-close]").click(function(t){e.close()})},onClose:function(){},beforeClose:function(){return!0}});e.setContent('<div id="modal-details">'+$("#table-template").html()+"</div>"),t.on("success",function(t){Snackbar.show({text:Lang.get("admin.actions.copy"),showAction:!1,customClass:"success"})}),$("[data-url]").addClass("disabled"),$(".form-control").on("keyup change",function(t){var e=$('[bind="'+$(this).attr("name")+'"]'),a=$(this).val();e.attr("append")&&(a=e.attr("append")+" "+a),e.length&&e.html(a)}),$(".manage-details").click(function(t){e.open()}),$('[name="amount"]').maskMoney(),$('[name="tax_amount"]').maskMoney(),$('[name="type"]').change(function(t){"unique"==$(this).val()?($(".type_unique").fadeIn(),$(".type_massive").hide()):($(".type_unique").hide(),$(".type_massive").fadeIn())}),$("#file").change(function(t){$(this).parse({config:{skipEmptyLines:!0,header:!1,complete:function(t,e){t.data&&$.importBehavior.onLoadFile(t.data)}}})}),$('[type="file"]').click(function(t){$(this).is(":focus")||t.preventDefault()}),$(".inputfile").change(function(t){for(var e,a=t.target.files,n=0;e=a[n];n++)$(this).next().html('<i class="mdi mdi-file"></i>'+e.name.trunc(25))}),$(".new-payment").click(function(t){$(".card-result").hide(),$(".card-form").fadeIn(),$("#generator")[0].reset(),$('[type="file"]').val("").next().html('<i class="mdi mdi-upload"></i> '+Lang.get("admin.buttons.upload_placeholder")),$(".editable-row tbody").empty(),Generator.addItem(t)}),Generator.reloadEmailTemplate(),$('.radio-selector input[type="radio"]:first-child').click(),$("[data-price]").mask("0,000,000.00",{reverse:!0}),$("[data-tax]").mask("00%",{reverse:!0}),$("[data-qty]").mask("0,000",{reverse:!0}),$('[name="phone"]').mask("0000-0000"),$('[name="send_email"], [name="send_sms"]').change(function(t){$(this).is(":checked")?$("#"+$(this).attr("name")).fadeIn(200):$("#"+$(this).attr("name")).hide()}),$(".unbind [data-listener]").keyup(Generator.resolveItems),$("[add-row]").click(Generator.addItem),$('.activate-details [type="checkbox"]').change(function(t){$(this).is(":checked")?($(".manage-details-wrap").fadeIn(),$(".tax-wrap").hide(),$('[name="amount"]').hide(),$("[data-main-total]").fadeIn(),Generator.resolveItems(t)):($(".manage-details-wrap").hide(),$(".tax-wrap").fadeIn(),$('[name="amount"]').fadeIn(),$("[data-main-total]").hide(),$('[name="amount"]').removeClass("disabled").val(null),$('[name="tax_amount"]').val(null))}),$('.activate-tax [type="checkbox"]').change(function(t){$(this).is(":checked")?$(".tax-wrap-input").fadeIn():$(".tax-wrap-input").hide()}),$("[tax-type]").click(function(t){if(t.preventDefault(),"%"==$(this).attr("tax-type")){var e=$(this).attr("tax-type-token");$(this).attr("tax-type",e),$(this).find(".btn-round").text(e),$("[data-tax]").mask("000,000.00",{reverse:!0}).attr("placeholder",e+"0.00")}else $(this).attr("tax-type","%"),$(this).find(".btn-round").text("%"),$("[data-tax]").mask("00%",{reverse:!0}).attr("placeholder","0%");Generator.resolveItems(t)}),$("[data-edit]").click(function(t){if(!$(this).attr("loaded")){$(this).attr("loaded",!0);var e=$(this).text();$(this).empty();var a=$("<input/>").addClass("form-control form-control-inline").attr({value:e,type:$(this).attr("data-type"),name:$(this).attr("data-edit")});$(this).append(a),a.focus()}}),$('[name="currency"]').change(function(t){var e=$('meta[name="app_local_currency"]').attr("content"),a=$('meta[name="app_local_currency_symbol"]').attr("content");"USD"==$(this).val()&&($('[bind="amount"]').attr("append","$"),$(".currency_indicator").html("$")),$(this).val()==e&&($('[bind="amount"]').attr("append",a),$(".currency_indicator").html(a));var n=$('[bind="amount"]'),r=$('[name="amount"]').val();n.attr("append")&&(r=n.attr("append")+" "+r),n.length&&n.html(r)}),Generator.addItem(null)})}});